<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Problemas admin</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="css/style.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

</head>

<body>


  <!-- Sidebar -->
  <div class="sidebar d-flex flex-column">
    <h4 class="text-center mb-4">Panel de Administrador</h4>
    <a href="dashboard_admin.html" class="nav-link">Inicio</a>
    <a href="problemas_admin.html" class="nav-link">Problemas</a>
    <a href="incidencias_admin.html" class="nav-link">Incidencias</a>
    <a href="cambios_admin.html" class="nav-link">Cambios</a>
    <a href="configuraciones.html" class="nav-link">Configuraciones</a>
    <a href="#" class="nav-link mt-auto" onclick="cerrarSesion()">Cerrar sesión</a>
  </div>

  <!-- Barra fija superior -->
  <div class="barra-coppel">
    <img src="imagenes/coppel.png" alt="Logo Coppel"  />
  </div>

  <!-- Contenedor para mostrar mensajes -->
  <!-- <div id="mensaje" class="mt-3"></div> -->
  <div class="main-content">
    <div id="mensaje" class="mt-3"></div>

    <h2 class="text-center mb-4">Gestión de Problemas</h2>
    <div class="table-responsive">
      <table id="tablaProblemas" class="table table-bordered text-center">
        <thead>
          <tr>
            <th>ID</th>
            <th>Incidencia</th>
            <th>Equipo</th>
            <th>Estado</th>
            <th>Fecha Creación</th>
            <th>Fecha de Solución</th>
            <th>Usuario que solicitó</th>
            <th>Tecnico de Problemas</th>
          </tr>
        </thead>
        <tbody id="listaProblemas"></tbody>
      </table>
    </div>

  </div>

<!-- Modal Detalles del Problema -->
<div class="modal fade" id="modalDetalles" tabindex="-1" aria-labelledby="modalDetallesLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable" style="max-width: 900px;">
    <div class="modal-content shadow">

      <form id="formModalDetalles">

        <!-- Campos ocultos -->
        <input type="hidden" id="idProblemaSeleccionado" name="idProblemaSeleccionado">
        <input type="hidden" id="verificarResuelto" name="verificarResuelto">

        <!-- Header -->
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title mx-auto" id="modalDetallesLabel">
            <i class="bi bi-exclamation-diamond-fill"></i> Detalles del Problema
          </h5>
          <button type="button" class="btn-close btn-close-white position-absolute end-0 me-3" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>

        <!-- Body con scroll si es necesario -->
        <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
          <div class="row g-3">

            <div class="col-12">
              <label for="modalMotivo" class="form-label fw-bold">Motivo</label>
              <textarea class="form-control" id="modalMotivo" rows="2" disabled></textarea>
            </div>

            <div class="col-md-6">
              <label for="modalEstado" class="form-label fw-bold">Estado</label>
              <select id="modalEstado" class="form-select">
                <option value="Pendiente">Pendiente</option>
                <option value="En Investigacion">En Investigación</option>
                <option value="Rechazado">Rechazado</option>
                <option value="Solucionado">Solucionado</option>
              </select>
            </div>

            <div class="col-md-6">
              <label for="modalSolucion" class="form-label fw-bold">Solución</label>
              <textarea class="form-control" id="modalSolucion" rows="2" disabled></textarea>
            </div>

            <div class="col-12">
              <label for="modalTecnico" class="form-label fw-bold">Asignar Técnico de Problemas</label>
              <select id="modalTecnico" class="form-select">
                <!-- Opciones dinámicas -->
              </select>
            </div>

          </div>

          <div id="mensaje2" class="mt-4"></div>
        </div>

        <!-- Footer -->
        <div class="modal-footer justify-content-center">
          <button type="button" class="btn btn-primary px-4" id="btnGuardarCambiosModal" onclick="asignarProblema()">
            <i class="bi bi-save"></i> Guardar Cambios
          </button>
        </div>

      </form>

    </div>
  </div>
</div>



  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/problemasAdmin.js"></script>
  <script src="js/logout.js"></script>
</body>

</html>